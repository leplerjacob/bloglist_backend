(this.webpackJsonpbloglist_frontend=this.webpackJsonpbloglist_frontend||[]).push([[0],{22:function(e,t,n){},24:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n(16),s=n.n(a),u=(n(22),n(3)),o=n.n(u),i=n(5),l=n(4),j=(n(24),n(6)),b=n.n(j),p="/api/blogs",f={getAll:function(){return b.a.get(p).then((function(e){return e.data}))},createBlog:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.a.post(p,t,{headers:{Authorization:"bearer "+n.token}}),e.abrupt("return",r.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},d=function(e){var t=e.blog;return Object(r.jsxs)("div",{className:"card blog",children:[Object(r.jsx)("h2",{children:t.title}),Object(r.jsx)("h3",{children:t.author}),Object(r.jsxs)("p",{children:["URL: ",t.url]}),Object(r.jsxs)("p",{children:["Likes: ",t.likes]})]})},h={login:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(e){var t=e.props;console.log(t);var n=t.success,c=t.message;return console.log("success:",n,"message: ",c),Object(r.jsx)("div",{children:n?Object(r.jsx)("h2",{className:"notify success",children:c}):Object(r.jsx)("h2",{className:"notify failed",children:c})})},O=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),u=Object(l.a)(s,2),j=u[0],b=u[1],p=Object(c.useState)(""),O=Object(l.a)(p,2),v=O[0],x=O[1],m=Object(c.useState)(null),w=Object(l.a)(m,2),y=w[0],S=w[1],k=Object(c.useState)(""),C=Object(l.a)(k,2),L=C[0],N=C[1],B=Object(c.useState)(""),A=Object(l.a)(B,2),I=A[0],J=A[1],T=Object(c.useState)(""),U=Object(l.a)(T,2),D=U[0],E=U[1],_=Object(c.useState)(null),z=Object(l.a)(_,2),P=z[0],R=z[1];Object(c.useEffect)((function(){f.getAll().then((function(e){return a(e)})).catch((function(e){console.log(e)}))}),[]);var q=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("The frontend login runs"),e.prev=2,e.next=5,h.login({username:j,password:v});case 5:n=e.sent,console.log("Login Successful"),R({success:!0,message:"Login successful"}),G(),window.localStorage.setItem("loggedBlogUser",JSON.stringify(n)),S(n),x(""),b(""),setTimeout((function(){window.localStorage.clear()}),1e5),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(2),console.log(e.t0),console.log("Login Not Successful"),R({success:!1,message:"Invalid Credentials"}),G();case 22:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.createBlog({title:L,author:D,url:I},y);case 4:N(""),E(""),J(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){setTimeout((function(){R(null)}),5e3)};return Object(r.jsxs)("div",{children:[P&&Object(r.jsx)(g,{props:P}),Object(r.jsxs)("div",{className:"front",children:[null===y?Object(r.jsxs)("form",{onSubmit:q,children:[Object(r.jsx)("h2",{children:"Login"}),Object(r.jsxs)("div",{children:["username",Object(r.jsx)("input",{type:"text",value:j,name:"Username",onChange:function(e){var t=e.target;return b(t.value)}})]}),Object(r.jsxs)("div",{children:["password",Object(r.jsx)("input",{type:"password",value:v,name:"Password",onChange:function(e){var t=e.target;return x(t.value)}})]}),Object(r.jsx)("button",{type:"submit",children:"login"})]}):Object(r.jsxs)("form",{onSubmit:F,children:["title:",Object(r.jsx)("input",{type:"text",value:L,onChange:function(e){var t=e.target;return N(t.value)}}),"author:",Object(r.jsx)("input",{type:"text",value:D,onChange:function(e){var t=e.target;return E(t.value)}}),"url:",Object(r.jsx)("input",{type:"text",value:I,onChange:function(e){var t=e.target;return J(t.value)}}),Object(r.jsx)("button",{type:"submit",children:"Create Blog"})]}),Object(r.jsx)("div",{children:n.map((function(e){return Object(r.jsx)(d,{blog:e},e.id)}))})]})]})};s.a.render(Object(r.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.17f862ba.chunk.js.map